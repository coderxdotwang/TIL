# 2020-06-27 Swift 中结构体 struct 与类 class 异同

## 相同点

语法非常相似，几乎完全一样：都可以有存储变量 **stored vars** 和计算变量 **computed vars**，以及常量 **constant lets**，都可以定义方法 **functions**，也都有初始化方法 **initializers**。

## 不同点

最大的不同点是结构体是值类型，类是引用类型。引用类型通过指针 **pointers** 传递，存储在堆中，传递时是指向内存中同一个对象；结构体则传递的是拷贝。

Swift 中数组、字典、整型值、布尔值、浮点值等都是结构体。

结构体是支持函数式编程的基础；类是为面向对象编程而设计。函数式编程关注事务的功能；面向对象关注的是将数据和功能封装到一个容器中，即类，类存储在堆中，总是可变（这也是类带来的问题，只要有指针就可以修改）。我们应该优先考虑使用结构体，只在特定情况下使用类，例如 MVVM 中的视图模型。

|           结构体 struct           |                 类 class                 |
| :-------------------------------: | :--------------------------------------: |
|         值类型 Value type         |         引用类型 Reference type          |
|  赋值或传递时会被复制 **copied**  |        通过指针 **pointers** 传递        |
|      写时复制 copy on write       |               自动引用计数               |
| 函数式编程 Functional programming | 面向对象编程 Object-oriented programming |
|            不支持继承             |                 单重继承                 |
|  自动生成的构造器初始化所有变量   |      自动生成的构造器不会初始化变量      |
|        必须明确声明可变性         |                总是可变的                |

### 参考：

1.[Stanford CS193P 2020 Lecture 2](https://www.bilibili.com/video/BV1HK4y1t7KG?p=2)

